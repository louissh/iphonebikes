<!DOCTYPE html>
<html>
<head>
 <meta name="apple-mobile-web-app-capable" content="yes">
<meta http-equiv="refresh" content="60"/>
</head>
<body style="background: black;">

 <div class="row big">
  <div class="column">Bonny St <span id="bonny" class="bold"></span></div>
  <div class="column">St Martins <span id="Martin" class="bold"></span></div>
</div> 
<p class="big"><span id="274west" class="bold right"></span>274 West</p>
<p class="big"><span id="274east" class="bold right"></span>274 East</p>
<div class="big">CMD W<span id="cmdwest" class="right"></span></div>
<div class="clearfix"></div>
<div class="big">CMD E<span id="cmdeast" class="right"></span></div>

<img width="100%" src="https://www.yourweather.co.uk/wimages/foto1ffbcea4215f7dfa049a5aac5774d4a5.png">

<script>
//bonny
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
    var myObj = JSON.parse(this.responseText);
    document.getElementById("bonny").innerHTML = myObj.additionalProperties[6].value + '';
  }
};
xmlhttp.open("GET", "https://api.tfl.gov.uk/BikePoint/BikePoints_462?app_id=9d4c19c5&app_key=4fab1b858c83977630bb1528938c7823", true);
xmlhttp.send();


//martins
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
    var myObj2 = JSON.parse(this.responseText);
    document.getElementById("Martin").innerHTML = myObj2.additionalProperties[6].value + '';
  }
};
xmlhttp.open("GET", "https://api.tfl.gov.uk/BikePoint/BikePoints_604?app_id=9d4c19c5&app_key=4fab1b858c83977630bb1528938c7823", true);
xmlhttp.send();


//274west
var xmlhttp = new XMLHttpRequest();
var url = "https://api.tfl.gov.uk/StopPoint/490003120W/Arrivals?app_id=9d4c19c5&app_key=4fab1b858c83977630bb1528938c7823";

xmlhttp.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
    var myArr = JSON.parse(this.responseText);
    myArr.sort(function(a, b) {
    return a.timeToStation - b.timeToStation;
});
    myFunction(myArr);
  }
};
xmlhttp.open("GET", url, true);
xmlhttp.send();

function myFunction(arr) {
  var out = "";
  var i;
  for(i = 0; i < arr.length; i++) {
    out += ' ' + Math.round(arr[i].timeToStation/60) + 'm';
  }
  document.getElementById("274west").innerHTML = out;
}

//274east
var xmlhttp2 = new XMLHttpRequest();
var url2 = "https://api.tfl.gov.uk/StopPoint/490003120E/Arrivals?app_id=9d4c19c5&app_key=4fab1b858c83977630bb1528938c7823";

xmlhttp2.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
    var myArr2 = JSON.parse(this.responseText);
        myArr2.sort(function(a, b) {
    return a.timeToStation - b.timeToStation;
});
myFunction2(myArr2);
  }
};
xmlhttp2.open("GET", url2, true);
xmlhttp2.send();

function myFunction2(arr) {
  var out = "";
  var i;
  for(i = 0; i < arr.length; i++) {
    out += ' ' + Math.round(arr[i].timeToStation/60) + 'm';
  }
  document.getElementById("274east").innerHTML = out;
}

//cmdeast
var xmlhttp3 = new XMLHttpRequest();
var url3 = "https://api.tfl.gov.uk/StopPoint/910GCMDNRD/Arrivals?app_id=9d4c19c5&app_key=4fab1b858c83977630bb1528938c7823";

xmlhttp3.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
    var myArr3 = JSON.parse(this.responseText);
        myArr3.sort(function(a, b) {
    return a.timeToStation - b.timeToStation;
});
myArr3 = myArr3.filter(function (a) {
    return a.platformName === 'Platform 2';
}).slice(0,3);;
myFunction3(myArr3);
  }
};
xmlhttp3.open("GET", url3, true);
xmlhttp3.send();

function myFunction3(arr) {
  var out = "";
  var i;
  for(i = 0; i < arr.length; i++) {
    out += arr[i].destinationName.substring(0, 2) + '<span class="bold">' + Math.round(arr[i].timeToStation/60) + 'm</span> ';
  }
  document.getElementById("cmdeast").innerHTML = out;
}

//cmdwest
var xmlhttp4 = new XMLHttpRequest();
var url4 = "https://api.tfl.gov.uk/StopPoint/910GCMDNRD/Arrivals?app_id=9d4c19c5&app_key=4fab1b858c83977630bb1528938c7823";

xmlhttp4.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
    var myArr4 = JSON.parse(this.responseText);
        myArr4.sort(function(a, b) {
    return a.timeToStation - b.timeToStation;
});
myArr4 = myArr4.filter(function (a) {
    return a.platformName === 'Platform 1';
}).slice(0,3);
myFunction4(myArr4);
  }
};
xmlhttp4.open("GET", url3, true);
xmlhttp4.send();

function myFunction4(arr) {
  var out = "";
  var i;
  for(i = 0; i < arr.length; i++) {
    out += arr[i].destinationName.substring(0, 2) + '<span class="bold">' + Math.round(arr[i].timeToStation/60) + 'm</span> ';
  }
  document.getElementById("cmdwest").innerHTML = out;
}
</script>



<style>

.big{
    font-size: 7vw;
    font-family: sans-serif;
    margin: 0;
 color: gray; 
}
.bold{
    color: red;
    font-weight: bold;
    }
.right{
    float: right;
}
.clearfix::after {
  content: "";
  clear: both;
  display: table;
}
.column {
  float: left;
  width: 50%;
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}

</style>

</body>
</html>